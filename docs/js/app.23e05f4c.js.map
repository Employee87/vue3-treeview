{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/TreeLevel.vue","webpack:///./src/setup/useLevel.ts","webpack:///./src/components/TreeLevel.vue?b677","webpack:///./src/components/TreeLevel.vue?2c9f","webpack:///./src/misc/default.ts","webpack:///./src/css/material.css?2d93","webpack:///./src/structure/IConfiguration.ts","webpack:///./src/components/TreeNode.vue","webpack:///./src/misc/nodeEvents.ts","webpack:///./src/setup/useInput.ts","webpack:///./src/components/TreeIcons.vue","webpack:///./src/setup/useIcon.ts","webpack:///./src/components/Icon.vue","webpack:///./src/components/Icon.vue?43c0","webpack:///./src/components/Icon.vue?6dbc","webpack:///./src/components/TreeIcons.vue?f24b","webpack:///./src/components/TreeIcons.vue?a175","webpack:///./src/setup/useNode.ts","webpack:///./src/misc/helpers.ts","webpack:///./src/setup/checkbox/auto.ts","webpack:///./src/setup/checkbox/manual.ts","webpack:///./src/setup/useCheckBox.ts","webpack:///./src/setup/useDragAndDrop.ts","webpack:///./src/setup/useCommon.ts","webpack:///./src/components/TreeNode.vue?6f63","webpack:///./src/components/TreeNode.vue?1078","webpack:///./src/setup/store.ts","webpack:///./src/Test.vue","webpack:///./src/components/Tree.vue","webpack:///./src/setup/useTree.ts","webpack:///./src/components/Tree.vue?f323","webpack:///./src/components/Tree.vue?8765","webpack:///./src/Test.vue?9d27","webpack:///./src/Test.vue?8214","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","id","style","level","item","index","node","depth","parentId","before-input","props","after-input","useLevel","config","nodes","parent","res","isNil","roots","addNode","children","a","Date","valueOf","padding","toInteger","components","TreeNode","required","type","Number","default","String","beforeCreate","this","$options","setup","render","defaultSize","defaultViewBox","defaultOpenDraw","defaultCloseDraw","defaultColor","createDefaultIcon","draw","width","height","viewBox","stroke","fill","src","alt","defaultConfig","editable","editing","checkboxes","dragAndDrop","keyboardNavigation","openedIcon","closedIcon","checkMode","hasNode","ref","setElementRef","enter","esc","space","left","right","up","down","nodeClass","setWrapperRef","draggable","tabindex","tabIndex","blur","focus","dragstart","dragend","dragenter","dragleave","dragover","drop","hideIcons","toggle","isLeaf","opened","hasCheckbox","checkedClass","clickCheckbox","checked","disabled","indeterminate","text","setInputRef","focusInputs","hasChildren","$attrs","setLevelRef","a*fter-input","nodeEvents","closed","edit","checkboxEvents","unchecked","dragEvents","start","end","Leave","over","useInput","cmn","emit","wrapper","input","set","val","editableClass","nv","ov","eq","event","useIcons","icon","fakeIcon","useIcon","hasIcons","fakeNodeStyle","xmlns","Icon","Boolean","computed","useNode","attrs","hasState","state","nbChildren","display","disabledClass","isArray","leaves","arr","idx","indexOf","isFinite","isFocused","focused","focusClass","prev","prevVisible","lastChild","last","next","nextVisible","nextRoot","ensureState","auto","check","v","setIndeterminate","states","cdn","allChecked","every","x","noneChecked","someChecked","someIndeterminate","some","recurseDown","updateState","rebuild","click","manual","useCheckBox","factory","indeterminateClass","ov1","ov2","ov3","deep","DragPosition","useDragAndDrop","dragged","element","pos","droppable","dropable","isDragging","isSameNode","isSameParent","targetParent","draggedParent","getParent","draggedLvl","getLevel","targetLvl","dragContain","contains","context","target","dragClass","in","under","evt","factor","y","pageY","getBoundingClientRect","midPoint","top","midRange","idxDrag","insertAt","insertIn","dragId","dragIdx","targetId","unshift","useCommon","hasConfig","e","current","currentTarget","related","relatedTarget","TreeLevel","TreeIcons","emits","values","string","methods","createState","createStore","computedNodes","computedConfig","for","configuration","modeBool","changeMode","log","nbRoots","maxChild","maxDepth","randomTree","useTree","Tree","code","nbNodes","mounted","id1","id11","id111","id112","id113","id12","id13","id131","id132","id2","id21","id211","id212","id22","id3","JSON","stringify","undefined","console","createNode","addNodes","lvl","randBool","randomState","focusable","mod","Math","random","mount"],"mappings":"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","file":"js/app.23e05f4c.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","<template>\r\n  <ul class=\"tree-level\" id=\"id\" :style=\"style\">\r\n    <TreeNode\r\n      v-for=\"(item, index) in level\"\r\n      v-bind=\"$attrs\"\r\n      :key=\"item.id\"\r\n      :node=\"item\"\r\n      :depth=\"depth\"\r\n      :index=\"index\"\r\n      :parentId=\"parentId\">\r\n\r\n      <template v-slot:before-input=\"props\">\r\n        <slot name=\"before-input\" :node=\"props.node\"></slot>\r\n      </template>\r\n\r\n      <template v-slot:after-input=\"props\">\r\n        <slot name=\"after-input\" :node=\"props.node\"></slot>\r\n      </template>\r\n    </TreeNode>\r\n  </ul>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport useLevel from '../setup/useLevel';\r\nimport TreeNode from \"./TreeNode.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    TreeNode\r\n  },\r\n  props: {\r\n    depth: {\r\n      required: true,\r\n      type: Number,\r\n      default: null\r\n    },\r\n    parentId: {\r\n      type: String,\r\n      default: null\r\n    }\r\n  },\r\n  beforeCreate() {\r\n    if (this.$options.components) {\r\n      this.$options.components.TreeNode = require(\"./TreeNode.vue\").default;\r\n    }\r\n  },\r\n  setup(props) {\r\n    return {\r\n      ...useLevel(props)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { state } from \"@/setup/store\";\r\nimport { computed, ref } from \"vue\";\r\nimport isNil from \"lodash-es/isNil\";\r\nimport toInteger from \"lodash-es/toInteger\";\r\nimport { defaultConfig } from '../misc/default';\r\nimport { INode } from \"@/structure/INode\";\r\n\r\nexport default function useLevel(props: {parentId: string, depth: number}): {} {\r\n    const config = state.config;\r\n    const nodes = state.nodes;\r\n    const depth = ref(props.depth);\r\n    const parent = ref(props.parentId);\r\n\r\n    const level = computed(() => {\r\n      const res: INode[] = [];\r\n\r\n      if (isNil(parent.value) && config.value.roots && depth.value === 0) {\r\n          for (const id of config.value.roots) {\r\n            addNode(id, res);\r\n          }\r\n    \r\n          return res;\r\n        }\r\n    \r\n      if (!isNil(parent.value)) {\r\n        const node = nodes.value[parent.value];\r\n  \r\n        if (node && node.children && node.children.length > 0) {\r\n          for (const id of node.children) {\r\n            addNode(id, res);\r\n          }\r\n        }\r\n  \r\n        return res;\r\n      }\r\n      \r\n        return [];\r\n    });\r\n\r\n    const addNode = ((id: string, a: INode[]) => {\r\n      if (nodes.value[id]) {\r\n        nodes.value[id].id = id;\r\n        nodes.value[id].parent = parent.value;\r\n        a.push(nodes.value[id]);\r\n      }\r\n    })\r\n\r\n    const id = computed(() => {\r\n        return new Date().valueOf();\r\n    });\r\n\r\n    const padding = computed(() => {\r\n        if (depth.value === 0) {\r\n            return 0;\r\n        }\r\n      \r\n        if (isNil(config.value.padding)) {\r\n            return defaultConfig.padding;\r\n        }\r\n\r\n        const p = toInteger(config.value.padding);\r\n\r\n        return p >=0 ? p : 0;      \r\n    });\r\n\r\n    const style = computed(() => {\r\n        return {\r\n            \"padding-left\": `${padding.value}px`,\r\n            \"list-style\": \"none\"\r\n        };\r\n    });\r\n\r\n    return {\r\n        id,\r\n        level,\r\n        padding,\r\n        style,\r\n    };\r\n}","\r\nimport useLevel from '../setup/useLevel';\r\nimport TreeNode from \"./TreeNode.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    TreeNode\r\n  },\r\n  props: {\r\n    depth: {\r\n      required: true,\r\n      type: Number,\r\n      default: null\r\n    },\r\n    parentId: {\r\n      type: String,\r\n      default: null\r\n    }\r\n  },\r\n  beforeCreate() {\r\n    if (this.$options.components) {\r\n      this.$options.components.TreeNode = require(\"./TreeNode.vue\").default;\r\n    }\r\n  },\r\n  setup(props) {\r\n    return {\r\n      ...useLevel(props)\r\n    }\r\n  }\r\n}\r\n","import { render } from \"./TreeLevel.vue?vue&type=template&id=bafd86cc\"\nimport script from \"./TreeLevel.vue?vue&type=script&lang=ts\"\nexport * from \"./TreeLevel.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import IConfiguration from \"../structure/IConfiguration\";\r\nimport IIcon from \"../structure/IIcon\";\r\nimport { INodeState } from '../structure/INodeState';\r\n\r\nexport const defaultSize = 8;\r\n\r\nconst defaultViewBox = \"0 0 123.958 123.959\";\r\n\r\nconst defaultOpenDraw = `M117.979,28.017h-112c-5.3,0-8,6.4-4.2,10.2l56,56c2.3,2.3,6.1,2.3,8.401,0l56-56\r\nC125.979,34.417,123.279,28.017,117.979,28.017z`;\r\n\r\nconst defaultCloseDraw = `M38.217,1.779c-3.8-3.8-10.2-1.1-10.2,4.2v112c0,5.3,6.4,8,10.2,4.2l56-56c2.3-2.301,\r\n2.3-6.101,0-8.401L38.217,1.779z`;\r\n\r\nconst defaultColor = \"black\";\r\n\r\nexport function createDefaultIcon(draw: string): IIcon {\r\n    return {\r\n        type: \"shape\",\r\n        width: defaultSize,\r\n        height: defaultSize,\r\n        viewBox: defaultViewBox,\r\n        stroke: defaultColor,\r\n        fill: defaultColor,\r\n        draw: draw,\r\n        name: null,\r\n        src: null,\r\n        alt: null,\r\n        style: null, \r\n        class: null\r\n    };\r\n}\r\n\r\nexport const defaultConfig : IConfiguration = {\r\n    roots: [],\r\n    padding: 16,\r\n    editable: false,\r\n    editing: null,\r\n    checkboxes: false,\r\n    dragAndDrop: false,\r\n    keyboardNavigation: false,\r\n    openedIcon: createDefaultIcon(defaultOpenDraw),\r\n    closedIcon: createDefaultIcon(defaultCloseDraw)\r\n};\r\n\r\nexport const defaultState: INodeState = {\r\n    opened: false,\r\n    disabled: false,\r\n    focusable: false,\r\n    draggable: false,\r\n    dropable: false,\r\n    checked: false,\r\n    indeterminate: false\r\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./material.css?vue&type=style&index=0&lang=css\"","import IIcon from './IIcon';\r\n\r\nexport enum checkMode {\r\n    auto,\r\n    manual\r\n}\r\n\r\nexport default interface IConfiguration {\r\n    roots: string[];\r\n    leaves?: string[];\r\n    padding?: number;\r\n    editable?: boolean;\r\n    editing?: string;\r\n    editableClass?: string;\r\n    checkboxes?: boolean;\r\n    checkMode?: checkMode;\r\n    dragAndDrop?: boolean;\r\n    keyboardNavigation?:boolean;\r\n    disabled?: boolean;\r\n    disabledClass?: string;\r\n    openedIcon?: IIcon;\r\n    closedIcon?: IIcon;\r\n    focusClass?: string;\r\n    checkedClass?: string;\r\n    indeterminateClass?: string;\r\n}\r\n","<template>\r\n  <li\r\n    class=\"tree-node\"\r\n    v-if=\"hasNode\"\r\n    :ref=\"setElementRef\"\r\n    @keydown.enter.stop=\"enter\"\r\n    @keydown.esc.stop=\"esc\"\r\n    @keydown.space.stop=\"space\"\r\n    @keydown.left.stop=\"left\"\r\n    @keydown.right.stop=\"right\"\r\n    @keydown.up.stop=\"up\"\r\n    @keydown.down.stop=\"down\">\r\n\r\n    <div  \r\n      class=\"node-wrapper\"\r\n      :class=\"nodeClass\"\r\n      :style=\"style\"\r\n      :ref=\"setWrapperRef\"\r\n      :draggable=\"draggable\"\r\n      :tabindex=\"tabIndex\"\r\n      @blur=\"blur\"\r\n      @click.stop=\"focus\"\r\n      @dragstart.stop=\"dragstart\"\r\n      @dragend.stop=\"dragend\"\r\n      @dragenter.prevent.stop=\"dragenter\"\r\n      @dragleave.prevent.stop=\"dragleave\"\r\n      @dragover.prevent.stop=\"dragover\"\r\n      @drop.prevent.stop=\"drop\">\r\n\r\n      <div\r\n        class=\"icon-wrapper\"\r\n        v-if=\"!hideIcons\"\r\n        @click.stop=\"toggle\">\r\n\r\n        <TreeIcons\r\n          :isLeaf=\"isLeaf\"\r\n          :opened=\"opened\">\r\n        </TreeIcons>\r\n      </div>\r\n\r\n      <div class=\"checkbox-wrapper\"\r\n          v-if=\"hasCheckbox\"\r\n          :class=\"checkedClass\"\r\n          @click.stop=\"clickCheckbox\">\r\n        <input\r\n          type=\"checkbox\"\r\n          tabindex=\"-1\"\r\n          class=\"node-checkbox\"\r\n          :checked=\"checked\"\r\n          :disabled=\"disabled\"\r\n          :indeterminate.prop=\"indeterminate\"\r\n        />\r\n      </div>  \r\n\r\n      <slot name=\"before-input\" :node=\"node\"></slot>\r\n\r\n      <div class=\"input-wrapper\">\r\n        <input\r\n          type=\"text\"\r\n          tabindex=\"0\"\r\n          class=\"node-input\"\r\n          v-if=\"editing\"\r\n          v-model=\"text\"\r\n          :ref=\"setInputRef\"\r\n          :disabled=\"disabled\"\r\n          @blur=\"blur\"\r\n        />\r\n\r\n        <span \r\n          v-else\r\n          class=\"node-text\"\r\n          @dblclick=\"focusInputs\">\r\n          {{ text }}\r\n        </span>\r\n      </div>\r\n\r\n      <slot name=\"after-input\" :node=\"node\"></slot>\r\n    </div>\r\n\r\n    <transition name=\"level\">\r\n      <TreeLevel\r\n        v-if=\"hasChildren\"\r\n        v-show=\"opened\"\r\n        v-bind=\"$attrs\"\r\n        :parentId=\"id\"\r\n        :depth=\"depth + 1\"\r\n        :ref=\"setLevelRef\">\r\n\r\n        <template v-slot:before-input=\"props\">\r\n          <slot name=\"before-input\" :node=\"props.node\"></slot>\r\n        </template>\r\n\r\n        <template v-slot:a*fter-input=\"props\">\r\n          <slot name=\"after-input\" :node=\"props.node\"></slot>\r\n        </template>\r\n      </TreeLevel>\r\n    </transition>\r\n  </li>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport useInput from \"../setup/useInput\";\r\nimport TreeLevel from './TreeLevel.vue';\r\nimport TreeIcons from './TreeIcons.vue';\r\nimport { useNode } from \"@/setup/useNode\";\r\nimport { useCheckBox } from \"../setup/useCheckBox\";\r\nimport useDragAndDrop from '../setup/useDragAndDrop';\r\nimport { checkboxEvents, dragEvents, nodeEvents } from \"@/misc/nodeEvents\";\r\nimport useCommon from '@/setup/useCommon';\r\n\r\nexport default {\r\n  components: {\r\n    TreeLevel,\r\n    TreeIcons\r\n  },\r\n  emits: [\r\n    ...Object.values(nodeEvents),\r\n    ...Object.values(checkboxEvents),\r\n    ...Object.values(dragEvents)    \r\n  ],\r\n  props: {\r\n    depth: {\r\n      required: true,\r\n      type: Number\r\n    },\r\n    index: {\r\n      required: true,\r\n      type: Number\r\n    },\r\n    node: {\r\n      required: true,\r\n      type: Object\r\n    },\r\n    parentId: {\r\n      default: null,\r\n      string: String\r\n    }\r\n  },\r\n  setup(props, { attrs, emit }) {\r\n    const cmn = useCommon(props, emit);\r\n\r\n    return {\r\n      ...cmn,\r\n      ...useNode(cmn, props, attrs, emit),\r\n      ...useInput(cmn, props, emit),\r\n      ...useCheckBox(cmn, props, emit),\r\n      ...useDragAndDrop(cmn, props, emit)\r\n    };\r\n  },\r\n  beforeCreate() {\r\n    if (this.$options.components) {\r\n      this.$options.components.TreeLevel = require(\"./TreeLevel.vue\").default;\r\n    }    \r\n  },\r\n  computed: {\r\n    nodeClass(): string[] {\r\n      return [\r\n        this.focusClass,\r\n        this.disabledClass,\r\n        this.checkedClass,\r\n        this.editableClass,\r\n        this.dragClass  \r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    setWrapperRef(e: any) {\r\n      this.wrapper = e;\r\n    },\r\n    setLevelRef(e: any) {\r\n      this.level = e;\r\n    },\r\n    setElementRef(e: any) {\r\n      this.element = e;\r\n    },\r\n    setInputRef(e: any) {\r\n      this.input = e;\r\n    }\r\n  },\r\n}\r\n</script>","export const nodeEvents = {\r\n    opened: \"nodeOpened\",\r\n    closed: \"nodeClosed\",\r\n    focus: \"nodeFocus\",\r\n    toggle: \"nodeToggle\",\r\n    blur: \"nodeBlur\",\r\n    edit: \"nodeEdit\",\r\n};\r\n\r\nexport const checkboxEvents = {\r\n    checked: \"nodeChecked\",\r\n    unchecked: \"nodeUnchecked\"\r\n};\r\n\r\nexport const dragEvents = {\r\n    start: \"nodeDragstart\",\r\n    end: \"nodeDragend\",\r\n    enter: \"nodeDragenter\",\r\n    Leave: \"nodeDragleave\",\r\n    over: \"nodeOver\",\r\n    drop: \"nodeDrop\"\r\n};","import INodeProps from '../structure/INodeProps';\r\nimport { computed, nextTick, ref, watch } from 'vue';\r\nimport eq from \"lodash-es/eq\";\r\nimport { nodeEvents } from '../misc/nodeEvents';\r\nimport IUseCommon from '../structure/IUseCommon';\r\n\r\nexport default function useInput(cmn: IUseCommon, props: INodeProps, emit: (event: string, ...args: any[]) => void): {} {\r\n    const node = cmn.node; \r\n    const config = cmn.config;\r\n    const wrapper = cmn.wrapper;\r\n    const editable = cmn.editable;\r\n    const editing = cmn.editing;\r\n    const input = ref<HTMLInputElement>(null);\r\n\r\n    const text = computed({\r\n        get: () => node.value.text,\r\n        set: (val: string) => node.value.text = val \r\n    });\r\n\r\n    const editableClass = computed(() => {\r\n        if (!cmn.editable.value) {\r\n            return null;\r\n        }\r\n\r\n        return config.value.editableClass ? config.value.editableClass : \"editable\";\r\n    });\r\n\r\n    watch(editing, (nv: boolean, ov: boolean) => {\r\n        if (!eq(nv, ov) && nv) {\r\n            nextTick(() => {\r\n                input.value.focus();\r\n            });\r\n        }\r\n    });\r\n\r\n    const focusInputs = (() => {\r\n        if (editable.value && !cmn.disabled.value) {\r\n            config.value.editing = node.value.id;\r\n            emit(nodeEvents.edit, node.value);\r\n        }\r\n    });\r\n\r\n    const esc = ((event: Event) => {\r\n        if (editable.value && config.value.keyboardNavigation) {\r\n            cmn.blur(event);\r\n            wrapper.value.focus();\r\n        }\r\n    });\r\n\r\n    const enter = (() => {\r\n        if (editable.value && !cmn.disabled.value && config.value.keyboardNavigation) {\r\n            focusInputs();\r\n        }\r\n    });\r\n\r\n    return {\r\n        text,\r\n        input,\r\n        editing,\r\n        editable,\r\n        editableClass,\r\n        focusInputs,\r\n        esc,\r\n        enter\r\n    };\r\n}","<template>\r\n    <template\r\n        v-if=\"useIcons\">\r\n\r\n        <Icon\r\n            v-if=\"opened\"\r\n            :icon=\"openedIcon\"/>\r\n\r\n        <Icon\r\n            v-else\r\n            :icon=\"closedIcon\"/>\r\n    </template>\r\n\r\n    <Icon\r\n        v-else\r\n        :icon=\"fakeIcon\"/>\r\n</template>\r\n<script lang=\"ts\">\r\nimport useIcon from \"@/setup/useIcon\";\r\nimport Icon from './Icon.vue';\r\nimport { createDefaultIcon } from \"@/misc/default\";\r\n\r\nexport default {\r\n    components: {\r\n        Icon\r\n    },\r\n    props: {\r\n        isLeaf: {\r\n            type: Boolean\r\n        },\r\n        opened: {\r\n            type: Boolean\r\n        }\r\n    },\r\n    setup(props) {\r\n        return useIcon(props);\r\n    },\r\n    computed: {\r\n        fakeIcon() {\r\n            return createDefaultIcon(null);\r\n        }\r\n    }\r\n}\r\n</script>","import { state } from './store';\r\nimport { computed, toRefs } from 'vue';\r\nimport { defaultConfig, defaultSize } from '../misc/default';\r\n\r\nexport default function useIcon(props: Record<string, unknown>): {} {\r\n    const { isLeaf } = toRefs(props); \r\n        \r\n    const config = state.config;\r\n\r\n    const openedIcon = computed(() => {\r\n        return config.value.openedIcon || defaultConfig.openedIcon;\r\n    });\r\n\r\n    const closedIcon = computed(() => {\r\n        return config.value.closedIcon || defaultConfig.closedIcon;\r\n    });\r\n\r\n    const hasIcons = computed(() => {\r\n        return closedIcon.value && openedIcon.value;\r\n    });\r\n\r\n    const useIcons = computed(() => {\r\n        return !isLeaf.value && hasIcons.value;\r\n    });\r\n\r\n    const fakeNodeStyle = computed(() => {\r\n        return {\r\n            width: `${defaultSize}px`,\r\n            height: `${defaultSize}px`\r\n        }\r\n    })\r\n\r\n    return {\r\n        hasIcons,\r\n        openedIcon,\r\n        closedIcon,\r\n        useIcons,\r\n        fakeNodeStyle\r\n    }\r\n}","<template v-if=\"icon\">\r\n  <svg\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    v-if=\"icon.type === 'shape'\"\r\n    :width=\"icon.width\"\r\n    :height=\"icon.height\"\r\n    :class=\"icon.class\"\r\n    :style=\"icon.style\"\r\n    :viewBox=\"icon.viewBox\">\r\n\r\n    <path \r\n      :d=\"icon.draw\"\r\n      :fill=\"icon.fill\"\r\n      :stroke=\"icon.stroke\">\r\n    </path>\r\n  </svg>\r\n\r\n  <i\r\n    v-else-if=\"icon.type === 'class'\" \r\n    :class=\"icon.class\"\r\n    :style=\"icon.style\">\r\n  </i>\r\n\r\n  <img \r\n    v-else-if=\"icon.type === 'img'\"\r\n    :src=\"icon.src\" \r\n    :alt=\"icon.alt\"\r\n    :width=\"icon.width\"\r\n    :height=\"icon.height\"\r\n    :class=\"icon.class\"\r\n    :style=\"icon.style\"\r\n  >    \r\n</template>\r\n<script lang=\"ts\">\r\nexport default {\r\n  props: {\r\n    icon: {\r\n      required: true,\r\n      type: Object\r\n    }\r\n  }\r\n}\r\n</script>\r\n","\r\nexport default {\r\n  props: {\r\n    icon: {\r\n      required: true,\r\n      type: Object\r\n    }\r\n  }\r\n}\r\n","import { render } from \"./Icon.vue?vue&type=template&id=d2e7b30c\"\nimport script from \"./Icon.vue?vue&type=script&lang=ts\"\nexport * from \"./Icon.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\r\nimport useIcon from \"@/setup/useIcon\";\r\nimport Icon from './Icon.vue';\r\nimport { createDefaultIcon } from \"@/misc/default\";\r\n\r\nexport default {\r\n    components: {\r\n        Icon\r\n    },\r\n    props: {\r\n        isLeaf: {\r\n            type: Boolean\r\n        },\r\n        opened: {\r\n            type: Boolean\r\n        }\r\n    },\r\n    setup(props) {\r\n        return useIcon(props);\r\n    },\r\n    computed: {\r\n        fakeIcon() {\r\n            return createDefaultIcon(null);\r\n        }\r\n    }\r\n}\r\n","import { render } from \"./TreeIcons.vue?vue&type=template&id=b36030a2\"\nimport script from \"./TreeIcons.vue?vue&type=script&lang=ts\"\nexport * from \"./TreeIcons.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { state } from \"@/setup/store\";\r\nimport { INode } from \"@/structure/INode\";\r\nimport INodeProps from \"@/structure/INodeProps\";\r\nimport IUseNode from \"@/structure/IUseNode\";\r\nimport isNil from \"lodash-es/isNil\";\r\nimport eq from \"lodash-es/eq\";\r\nimport isArray from \"lodash-es/isArray\";\r\nimport { computed, ref, watch, nextTick } from 'vue';\r\nimport { nodeEvents } from '../misc/nodeEvents';\r\nimport IUseCommon from '../structure/IUseCommon';\r\nimport { Vue } from 'vue-class-component';\r\n\r\nexport function useNode(cmn: IUseCommon, props: INodeProps, attrs: Record<string, unknown>, emit: (event: string, ...args: any[]) => void): IUseNode {\r\n    const node = cmn.node;\r\n    const config = cmn.config;\r\n    const wrapper = cmn.wrapper;\r\n    const editing = cmn.editing;\r\n    const level = ref<Vue>(null);\r\n\r\n    const id = computed(() => {\r\n        return hasNode.value && node.value.id;\r\n    })\r\n\r\n    const hasNode = computed(() => {\r\n        return !isNil(node);\r\n    });\r\n\r\n    const hasState = computed(() => {\r\n        return hasNode.value && !isNil(node.value.state);\r\n    });\r\n\r\n    const roots = computed(() => {\r\n        return config.value.roots || [];\r\n    })\r\n\r\n    const children = computed(() => {\r\n        return isNil(node.value.children) ? [] : node.value.children;\r\n    });\r\n\r\n    const nbChildren = computed(() => {\r\n        return children.value.length;\r\n    });\r\n\r\n    const hasChildren = computed(() => {\r\n        return nbChildren.value > 0;\r\n    });\r\n\r\n    const opened = computed(() => {\r\n        return hasState.value && node.value.state.opened || false;\r\n    });\r\n\r\n    const style = computed(() => {\r\n        return {\r\n            display: \"flex\"\r\n        };\r\n    });\r\n\r\n    const disabled = computed(() => {\r\n        return config.value.disabled || node.value.state.disabled;\r\n    });\r\n\r\n    const disabledClass = computed(() => {\r\n        if (!disabled.value) {\r\n            return null;\r\n        }\r\n\r\n        return config.value.disabledClass ? config.value.disabledClass : \"disabled\";\r\n    });\r\n\r\n    const hideIcons = computed(() => {\r\n        for (const id of config.value.roots) {\r\n            const node = state.nodes.value[id];\r\n\r\n            if (node.children && node.children.length > 0) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    });\r\n\r\n    const isLeaf = computed(() => {\r\n        if (isArray(config.value.leaves)) {\r\n            const arr: string[] = config.value.leaves;\r\n            const idx = arr.indexOf(id.value);\r\n            return Number.isFinite(idx) && idx >= 0;\r\n        }\r\n\r\n        return !isArray(node.value.children) || node.value.children.length === 0;\r\n    });\r\n\r\n    const isFocused = computed(() => {\r\n        return state.focused.value === node.value.id;\r\n    });\r\n\r\n    const tabIndex = computed(() => {\r\n        if (props.depth === 0 && props.index === 0 && !isFocused.value) {\r\n            return 0; \r\n        }\r\n\r\n        return isFocused.value ? 0 : -1;\r\n    })\r\n\r\n    const focusClass = computed(() =>  {\r\n        if (!isFocused.value) {\r\n            return null;\r\n        } \r\n\r\n        return config.value.focusClass ? config.value.focusClass : \"focused\";\r\n    })\r\n\r\n    watch(opened, (nv: boolean) => {\r\n        nv ? emit(nodeEvents.opened, node.value) : emit(nodeEvents.closed, node.value);\r\n    });\r\n\r\n    watch(isFocused, (nv: boolean, ov: boolean) => {\r\n        if (!eq(nv, ov) && nv && wrapper.value) {\r\n            nextTick(() => {\r\n                wrapper.value.focus();\r\n                emit(nodeEvents.focus, node);\r\n            });\r\n        }\r\n    });\r\n\r\n    const focus = (() => {\r\n        state.focused.value = node.value.id;\r\n    });\r\n\r\n    const toggle = (() => {\r\n        node.value.state.opened = !node.value.state.opened;\r\n        emit(nodeEvents.toggle, node.value);\r\n    });\r\n\r\n\r\n    const right = (() => {\r\n        if (!editing.value && config.value.keyboardNavigation) {\r\n            node.value.state.opened = true;\r\n        }\r\n    });\r\n\r\n    const left = (() => {\r\n        if (!editing.value && config.value.keyboardNavigation) {\r\n            node.value.state.opened = false;\r\n        }\r\n    });\r\n\r\n    const up = (() => {\r\n        const prev = prevVisible(node.value.id);\r\n\r\n        if (prev &&  config.value.keyboardNavigation) {\r\n            state.focused.value = prev;\r\n        }\r\n    });\r\n\r\n    const prevVisible = ((id: string) => {\r\n        const n = state.nodes.value[id];  \r\n        const p = state.nodes.value[n.parent];\r\n\r\n        if (!p) {\r\n            const idx = roots.value.indexOf(id);\r\n            return lastChild(roots.value[idx - 1]) || null;            \r\n        }\r\n\r\n        return prev(p.id);\r\n    });\r\n\r\n    const prev = ((id: string): string => { \r\n        const n = state.nodes.value[id];\r\n\r\n        if (n.children && n.children.length > 0) {\r\n            const idx = n.children.indexOf(node.value.id);\r\n            const prev = n.children[idx - 1];\r\n\r\n            if (!isNil(prev)) {\r\n                return lastChild(prev);\r\n            }\r\n        } \r\n\r\n        return n.id;\r\n    });\r\n\r\n    const lastChild = ((id: string): string => {\r\n        const n = state.nodes.value[id];\r\n\r\n        if (!n) {\r\n            return null;\r\n        }  \r\n\r\n        if (n.children && n.children.length > 0 && n.state.opened) {\r\n            const last = n.children[n.children.length - 1];\r\n\r\n            if (!isNil(last)) {\r\n                return lastChild(last);\r\n            }\r\n        }\r\n\r\n        return n.id;\r\n    })\r\n\r\n    const down = (() => {\r\n        const next = nextVisible(node.value.id);\r\n\r\n        if (next && config.value.keyboardNavigation) {\r\n            state.focused.value = next;\r\n        }\r\n    });\r\n\r\n    const nextVisible = ((id: string): string => {\r\n        const n = state.nodes.value[id];\r\n\r\n        if (n.children && n.children.length > 0 && n.state.opened) {\r\n            return n.children[0];\r\n        }\r\n\r\n        const p = state.nodes.value[n.parent];\r\n\r\n        return p ? next(p, id) : nextRoot(id);\r\n    });\r\n\r\n    const next = ((p: INode, id: string): string => {\r\n        const idx = p.children.indexOf(id);\r\n\r\n        if (p.children[idx + 1]) {\r\n            return p.children[idx + 1];\r\n        }\r\n\r\n        if (p.parent) {\r\n            return next(state.nodes.value[p.parent], p.id);\r\n        }\r\n\r\n        return nextRoot(p.id);\r\n    });\r\n\r\n    const nextRoot = ((id: string) => {\r\n        const roots = config.value.roots;\r\n        const idx = roots.indexOf(id);\r\n        return roots[idx + 1] || null;\r\n    })\r\n\r\n    return {\r\n        id,\r\n        level,\r\n        style,\r\n        opened,\r\n        hasNode,\r\n        hideIcons,\r\n        hasChildren,\r\n        tabIndex,\r\n        focusClass,\r\n        disabledClass,\r\n        isLeaf,\r\n        right,\r\n        left,\r\n        up,\r\n        down,\r\n        toggle,\r\n        focus\r\n    }\r\n}","import isNil from \"lodash-es/isNil\";\r\nimport { INode } from '../structure/INode';\r\n\r\nexport function ensureState(node: INode): void {\r\n    if (isNil(node.state)) {\r\n        node.state = {};\r\n        node.state.checked = false;\r\n    }\r\n}\r\n","import { computed, Ref } from 'vue';\r\nimport { INode } from '../../structure/INode';\r\nimport { state } from '../store';\r\nimport IUseCheck from '../../structure/IUseCheck';\r\nimport isNil from \"lodash-es/isNil\";\r\nimport { ensureState } from '../../misc/helpers';\r\n\r\nexport default function auto(node: Ref<INode>): IUseCheck {\r\n    const nodes = state.nodes;\r\n\r\n    const check = ((v: boolean) => {\r\n        node.value.state.checked = v;\r\n    });\r\n\r\n    const setIndeterminate = ((v: boolean) => {\r\n        node.value.state.indeterminate = v;\r\n    });\r\n\r\n    const children = computed(() => {\r\n        return node.value.children;\r\n    })\r\n\r\n    const hasChildren = computed(() => {\r\n        return !isNil(children.value) && children.value.length > 0 || false;\r\n    });\r\n\r\n    const states = computed(() => {\r\n        if (!hasChildren.value) {\r\n            return [];\r\n        }\r\n\r\n        let res = [];\r\n\r\n        for (const c of children.value) {\r\n            const cdn = nodes.value[c];\r\n            \r\n            if (!isNil(cdn)) {\r\n                ensureState(cdn)\r\n                res.push(cdn.state);\r\n            }\r\n        }\r\n\r\n        return res;\r\n    })\r\n\r\n    const checked = computed(() => {\r\n        return node.value.state.checked;\r\n    });\r\n\r\n    const indeterminate = computed(() => {\r\n        return node.value.state.indeterminate;\r\n    });\r\n\r\n    const allChecked = computed(() => {\r\n        return states.value.every((x) => x.checked);    \r\n    });\r\n\r\n    const noneChecked = computed(() => {\r\n        return states.value.every((x) => !x.checked);\r\n    })\r\n\r\n    const someChecked = computed(() => {\r\n        return !allChecked.value && !noneChecked.value;\r\n    });\r\n\r\n    const someIndeterminate = computed(() => {\r\n        return states.value.some((x) => x.indeterminate);\r\n    });\r\n\r\n    const recurseDown = ((v: boolean) => {\r\n        if (!isNil(v)) {\r\n            for (const s of states.value) {\r\n                s.indeterminate = false;\r\n                s.checked = v;\r\n            }\r\n        }\r\n    });\r\n\r\n    const updateState = (() => {\r\n        if (!hasChildren.value) {\r\n            return;\r\n        }\r\n\r\n        if (noneChecked.value && !someIndeterminate.value) {\r\n            setIndeterminate(false);\r\n            check(false);\r\n            return;\r\n        }\r\n\r\n        if (allChecked.value) {\r\n            setIndeterminate(false);\r\n            check(true);\r\n            return;\r\n        }\r\n\r\n        setIndeterminate(true);\r\n        check(false)\r\n    });\r\n\r\n    const rebuild = (() => {\r\n        ensureState(node.value);\r\n        recurseDown(checked.value);\r\n        updateState();\r\n    });\r\n\r\n    const click = (() => {\r\n        setIndeterminate(false);\r\n        check(!node.value.state.checked);\r\n    });\r\n\r\n    return {\r\n        checked,\r\n        indeterminate,\r\n        noneChecked,\r\n        someChecked,\r\n        allChecked,\r\n        someIndeterminate,\r\n        click,\r\n        rebuild,\r\n        updateState,\r\n        recurseDown\r\n    };\r\n}","import { computed, Ref } from 'vue';\r\nimport { INode } from '../../structure/INode';\r\nimport IUseCheck from '../../structure/IUseCheck';\r\n\r\nexport default function manual(node: Ref<INode>): IUseCheck {\r\n\r\n    const checked = computed(() => {\r\n        return node.value.state.checked;\r\n    });\r\n\r\n    const indeterminate = computed(() => {\r\n        return node.value.state.indeterminate;\r\n    })\r\n\r\n    const noneChecked = computed(() => {\r\n        return false;\r\n    })\r\n\r\n    const someChecked = computed(() => {\r\n        return false;\r\n    })\r\n\r\n    const allChecked = computed(() => {\r\n        return false;\r\n    })\r\n\r\n    const someIndeterminate = computed(() => {\r\n        return false;\r\n    })\r\n\r\n    const click = (() => {\r\n        node.value.state.checked = !node.value.state.checked;\r\n    });\r\n\r\n    const rebuild = (() => {\r\n    });\r\n\r\n    const updateState = (() => {\r\n    });\r\n\r\n    const recurseDown = (() => {\r\n    });\r\n\r\n    return {\r\n        checked,\r\n        indeterminate,\r\n        noneChecked,\r\n        someChecked,\r\n        allChecked,\r\n        someIndeterminate,\r\n        click,\r\n        rebuild,\r\n        updateState,\r\n        recurseDown\r\n    };\r\n}","import { computed, watch, ComputedRef } from 'vue';\r\nimport INodeProps from '../structure/INodeProps';\r\nimport { defaultConfig } from '../misc/default';\r\nimport { checkboxEvents } from '../misc/nodeEvents';\r\nimport auto from '@/setup/checkbox/auto';\r\nimport eq from \"lodash-es/eq\";\r\nimport manual from '@/setup/checkbox/manual';\r\nimport { checkMode } from '../structure/IConfiguration';\r\nimport IUseCommon from '../structure/IUseCommon';\r\n\r\nexport function useCheckBox(cmn: IUseCommon, props: INodeProps, emit: (event: string, ...args: any[]) => void): {} {\r\n    const node = cmn.node;\r\n    const config = cmn.config;\r\n\r\n    const mode = computed(() => {\r\n        return config.value.checkMode === checkMode.auto ? checkMode.auto : checkMode.manual;\r\n    })\r\n\r\n    const factory = computed(() =>  {\r\n        return mode.value === checkMode.auto ? \r\n        auto(node) :\r\n        manual(node);\r\n    });\r\n\r\n    watch(mode, (nv: number, ov: number) => {\r\n        if (!eq(nv, ov)) {\r\n            factory.value.rebuild();\r\n        }\r\n    })\r\n\r\n    const checked = computed(() => {\r\n        return factory.value.checked.value;\r\n    });\r\n\r\n    const indeterminate = computed(() => {\r\n        return factory.value.indeterminate.value;\r\n    })\r\n\r\n    const hasCheckbox = computed(() => {\r\n        return config.value.checkboxes || defaultConfig.checkboxes;        \r\n    });\r\n\r\n    const checkedClass = computed(() => {\r\n        return [\r\n            factory.value.checked.value ? config.value.checkedClass ? config.value.checkedClass : \"checked\" : null,\r\n            factory.value.indeterminate.value ? config.value.indeterminateClass ? config.value.indeterminateClass : \"indeterminate\" : null\r\n        ];\r\n    })\r\n\r\n    watch(checked, (nv: boolean, ov: boolean) => {\r\n        if (!indeterminate.value) {\r\n            factory.value.recurseDown(nv);\r\n        }\r\n    })\r\n\r\n    const allChecked = computed(() => {\r\n        return factory.value.allChecked.value;    \r\n    });\r\n\r\n    const noneChecked = computed(() => {\r\n        return factory.value.noneChecked.value;\r\n    })\r\n\r\n    const someChecked = computed(() => {\r\n        return factory.value.someChecked.value;\r\n    });\r\n\r\n    const someIndeterminate = computed(() => {\r\n        return factory.value.someIndeterminate.value;\r\n    });\r\n\r\n    watch<Array<ComputedRef>>([allChecked, noneChecked, someChecked], ([ov1, ov2, ov3]) => {\r\n        if (ov1 || ov2 || ov3) {\r\n            factory.value.updateState();\r\n        }\r\n    }, { deep: true });\r\n\r\n    watch(someIndeterminate, (nv: boolean, ov: boolean) => {\r\n        if (!eq(nv, ov)) {\r\n            factory.value.updateState();\r\n        }\r\n    }, { deep: true });\r\n\r\n    const clickCheckbox = (): void => {\r\n        if (!cmn.disabled.value) {\r\n            factory.value.click()\r\n            emit(checked.value ? checkboxEvents.checked : checkboxEvents.unchecked, node);\r\n        }\r\n    }\r\n\r\n    const space = (() => {\r\n        if (!cmn.editing.value && !cmn.disabled.value && config.value.keyboardNavigation) {\r\n            factory.value.click()\r\n        }\r\n    });\r\n\r\n    return {\r\n        checked,\r\n        hasCheckbox,\r\n        indeterminate,\r\n        checkedClass,\r\n        space,\r\n        clickCheckbox\r\n    };\r\n} ","import INodeProps from \"@/structure/INodeProps\";\r\nimport { state } from './store';\r\nimport { computed, ref } from 'vue';\r\nimport isNil from \"lodash-es/isNil\";\r\nimport { INode } from '../structure/INode';\r\nimport { dragEvents } from '../misc/nodeEvents';\r\nimport IUseCommon from '../structure/IUseCommon';\r\n\r\nenum DragPosition {\r\n    over,\r\n    in,\r\n    under\r\n}\r\n\r\nexport default function useDragAndDrop(cmn: IUseCommon, props: INodeProps, emit: (event: string, ...args: any[]) => void): {} {\r\n    const node = cmn.node;\r\n    const parentId = ref(props.parentId);\r\n    const config = cmn.config;\r\n    const nodes = state.nodes;\r\n    const dragged = ref(state.dragged);\r\n    const wrapper = cmn.wrapper;\r\n    const element = ref<HTMLElement>(null);\r\n    const pos = ref<DragPosition>(null);\r\n\r\n    const draggable = computed(() => {\r\n        return !cmn.disabled.value && config.value.dragAndDrop && node.value.state.draggable !== false;\r\n    });\r\n\r\n    const droppable = computed(() => {\r\n        return config.value.dragAndDrop && node.value.state.dropable !== false;\r\n    });\r\n\r\n    const isDragging = computed(() => {\r\n        return !isNil(dragged.value.node); \r\n    });\r\n\r\n    const isSameNode = computed(() => {\r\n        return isDragging.value && dragged.value.node.id === node.value.id;\r\n    });\r\n\r\n    const isSameParent = computed(() => {\r\n        return targetParent.value === draggedParent.value;\r\n    });\r\n\r\n    const draggedParent = computed(() => {\r\n        return !isDragging.value || !dragged.value.parentId ? null : getParent(dragged.value.parentId);\r\n    });\r\n\r\n    const draggedLvl = computed(() => {\r\n        return getLevel(draggedParent.value);\r\n    });\r\n\r\n    const targetParent = computed(() => {\r\n        return !isNil(parentId.value) ? getParent(parentId.value) : null; \r\n    });\r\n\r\n    const targetLvl = computed(() => {\r\n        return getLevel(targetParent.value);\r\n    });\r\n\r\n    const dragContain = computed(() => {\r\n        if (!isDragging.value || !dragged.value.wrapper) {\r\n            return false;\r\n        }\r\n\r\n        return dragged.value.element.contains(element.value);\r\n    });\r\n\r\n    const context = computed(() => {\r\n        return {\r\n            dragged: dragged.value,\r\n            target: {\r\n                node: node.value.id,\r\n                element: element.value,\r\n                wrapper: wrapper.value,\r\n                parentId: parentId.value\r\n            }\r\n        }\r\n    })\r\n\r\n    const dragClass = computed(() => {\r\n        return [\r\n            !droppable.value ? \"undroppable\" : null,\r\n            pos.value === DragPosition.over ? \"node-over\" : null,\r\n            pos.value === DragPosition.in ? \"node-in\" : null,\r\n            pos.value === DragPosition.under ? \"node-under\" : null\r\n        ];\r\n    })\r\n\r\n    const getParent = ((id: string) => {\r\n        return !isNil(id) ? nodes.value[id] : null;\r\n    });\r\n\r\n    const getLevel = ((node: INode) => {\r\n        return !isNil(node) ? node.children : config.value.roots;\r\n    })\r\n\r\n    const dragstart = (evt: DragEvent): void => {\r\n        if (draggable.value) {\r\n            dragged.value = {\r\n                node: node.value,\r\n                element: element.value,\r\n                wrapper: wrapper.value,\r\n                parentId: parentId.value\r\n            };\r\n            emit(dragEvents.start, context.value);\r\n        }\r\n    };\r\n\r\n    const dragend = (evt: DragEvent): void => {\r\n        emit(dragEvents.end, context.value);\r\n    }\r\n\r\n    const dragenter = (evt: DragEvent): void => {\r\n        emit(dragEvents.enter, context.value);\r\n    }\r\n\r\n    const dragleave = (evt: DragEvent): void => {\r\n        pos.value = null;\r\n        emit(dragEvents.Leave, context.value);\r\n    }\r\n\r\n    const dragover = (evt: DragEvent): void => {\r\n        if (!isSameNode.value && isDragging.value && !dragContain.value) {\r\n            emit(dragEvents.over, context.value);\r\n\r\n            if (wrapper.value) {\r\n                const factor = .3;\r\n                const y = evt.pageY;\r\n                const r = wrapper.value.getBoundingClientRect();\r\n                const midPoint = r.top + (r.height / 2);\r\n                const midRange = [\r\n                    midPoint - r.height * factor,\r\n                    midPoint + r.height * factor\r\n                ];\r\n    \r\n                const idx = draggedLvl.value.indexOf(node.value.id);\r\n                const idxDrag = draggedLvl.value.indexOf(dragged.value.node.id);\r\n    \r\n                if (y < midRange[0] && \r\n                    (!isSameParent.value || \r\n                        (isSameParent.value && idx !== idxDrag + 1))) {\r\n                    pos.value = DragPosition.over;\r\n                } else if (y > midRange[1] && \r\n                    (!isSameParent.value || \r\n                        (isSameParent.value && idx !== idxDrag - 1))) {\r\n                    pos.value = DragPosition.under;\r\n                } else {\r\n                    pos.value = DragPosition.in;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    const drop = (evt: DragEvent): void => {\r\n\r\n        emit(dragEvents.drop, context.value);\r\n\r\n        if (!isSameNode.value && droppable.value && !dragContain.value) {\r\n            switch(pos.value) {\r\n                case DragPosition.over: {\r\n                    insertAt(0);\r\n                    break;\r\n                }\r\n                case DragPosition.under: {\r\n                    insertAt(1);\r\n                    break;\r\n                }\r\n                case DragPosition.in: {\r\n                    insertIn();\r\n                }\r\n            }\r\n            pos.value = null;\r\n        }\r\n    }\r\n\r\n    const insertAt = (i: 0 | 1) => {\r\n        if (isDragging.value) {\r\n            const dragId = dragged.value.node.id;\r\n            const dragIdx = draggedLvl.value.indexOf(dragId);\r\n            draggedLvl.value.splice(dragIdx, 1);\r\n    \r\n            const targetId = node.value.id;\r\n            const idx = targetLvl.value.indexOf(targetId);\r\n            targetLvl.value.splice(idx + i, 0, dragId);\r\n        }\r\n    }\r\n\r\n    const insertIn = () => {\r\n        if (isDragging.value) {\r\n            const dragId = dragged.value.node.id;\r\n\r\n            if (draggedLvl.value) {\r\n                const idx = draggedLvl.value.indexOf(dragId);\r\n                draggedLvl.value.splice(idx, 1);\r\n            }\r\n    \r\n            if (!node.value.children) {\r\n                node.value.children = [];\r\n            }\r\n    \r\n            node.value.children.unshift(dragId);\r\n        }\r\n    }\r\n\r\n    return {\r\n        element,\r\n        dragClass,\r\n        draggable,\r\n        dragstart,\r\n        dragend,\r\n        dragenter,\r\n        dragleave,\r\n        dragover,\r\n        drop\r\n    }\r\n}\r\n","import INodeProps from \"@/structure/INodeProps\";\r\nimport isNil from \"lodash-es/isNil\";\r\nimport { computed, toRefs, ref } from 'vue';\r\nimport { state } from './store';\r\nimport IUseCommon from '../structure/IUseCommon';\r\nimport { defaultConfig } from '../misc/default';\r\nimport { nodeEvents } from '../misc/nodeEvents';\r\n\r\nexport default function useCommon(props: INodeProps, emit: (event: string, ...args: any[]) => void): IUseCommon {\r\n    const { node } = toRefs(props);\r\n\r\n    const config = state.config;\r\n\r\n    const wrapper = ref<HTMLElement>(null);\r\n\r\n    // ensure state exist\r\n    if (isNil(node.value.state)) {\r\n        node.value.state = {};\r\n    }\r\n\r\n    const hasNode = computed(() => {\r\n        return !isNil(node);\r\n    });\r\n\r\n    const hasConfig = computed(() => {\r\n        return !isNil(config.value);\r\n    });\r\n\r\n    const hasState = computed(() => {\r\n        return hasNode.value && !isNil(node.value.state);\r\n    });\r\n\r\n    const disabled = computed(() => {\r\n        return config.value.disabled || node.value.state.disabled;\r\n    });\r\n\r\n    const editable = computed(() => {\r\n        return config.value.editable && \r\n        (!isNil(node.value.state.editable) ? node.value.state.editable : true) || defaultConfig.editable;\r\n    });\r\n\r\n    const editing = computed(() => {\r\n        return editable.value && (config.value.editing === node.value.id);\r\n    })\r\n\r\n    const blur = ((e: MouseEvent) => {\r\n        const current = e.currentTarget as HTMLElement;\r\n        const related = e.relatedTarget as HTMLElement;\r\n\r\n        if (!current.contains(related)) {\r\n            config.value.editing = null;\r\n            emit(nodeEvents.blur, e, node.value);\r\n        }\r\n    });\r\n\r\n    return {\r\n        node, \r\n        config,\r\n        hasNode,\r\n        hasState,\r\n        hasConfig,\r\n        disabled,\r\n        wrapper,\r\n        editable,\r\n        editing,\r\n        blur\r\n    };\r\n}","\r\nimport useInput from \"../setup/useInput\";\r\nimport TreeLevel from './TreeLevel.vue';\r\nimport TreeIcons from './TreeIcons.vue';\r\nimport { useNode } from \"@/setup/useNode\";\r\nimport { useCheckBox } from \"../setup/useCheckBox\";\r\nimport useDragAndDrop from '../setup/useDragAndDrop';\r\nimport { checkboxEvents, dragEvents, nodeEvents } from \"@/misc/nodeEvents\";\r\nimport useCommon from '@/setup/useCommon';\r\n\r\nexport default {\r\n  components: {\r\n    TreeLevel,\r\n    TreeIcons\r\n  },\r\n  emits: [\r\n    ...Object.values(nodeEvents),\r\n    ...Object.values(checkboxEvents),\r\n    ...Object.values(dragEvents)    \r\n  ],\r\n  props: {\r\n    depth: {\r\n      required: true,\r\n      type: Number\r\n    },\r\n    index: {\r\n      required: true,\r\n      type: Number\r\n    },\r\n    node: {\r\n      required: true,\r\n      type: Object\r\n    },\r\n    parentId: {\r\n      default: null,\r\n      string: String\r\n    }\r\n  },\r\n  setup(props, { attrs, emit }) {\r\n    const cmn = useCommon(props, emit);\r\n\r\n    return {\r\n      ...cmn,\r\n      ...useNode(cmn, props, attrs, emit),\r\n      ...useInput(cmn, props, emit),\r\n      ...useCheckBox(cmn, props, emit),\r\n      ...useDragAndDrop(cmn, props, emit)\r\n    };\r\n  },\r\n  beforeCreate() {\r\n    if (this.$options.components) {\r\n      this.$options.components.TreeLevel = require(\"./TreeLevel.vue\").default;\r\n    }    \r\n  },\r\n  computed: {\r\n    nodeClass(): string[] {\r\n      return [\r\n        this.focusClass,\r\n        this.disabledClass,\r\n        this.checkedClass,\r\n        this.editableClass,\r\n        this.dragClass  \r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    setWrapperRef(e: any) {\r\n      this.wrapper = e;\r\n    },\r\n    setLevelRef(e: any) {\r\n      this.level = e;\r\n    },\r\n    setElementRef(e: any) {\r\n      this.element = e;\r\n    },\r\n    setInputRef(e: any) {\r\n      this.input = e;\r\n    }\r\n  },\r\n}\r\n","import { render } from \"./TreeNode.vue?vue&type=template&id=149d2c4b\"\nimport script from \"./TreeNode.vue?vue&type=script&lang=ts\"\nexport * from \"./TreeNode.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { INode } from \"@/structure/INode\";\r\nimport IConfiguration from '../structure/IConfiguration';\r\nimport { toRefs, computed, ComputedRef, Ref, ref } from 'vue';\r\nimport ITreeProps from '../structure/ITreeProps';\r\nimport IDragContext from '../structure/IDragContext';\r\n\r\nexport interface IState {\r\n    nodes: ComputedRef<{[id: string]: INode}>;\r\n    config: ComputedRef<IConfiguration>;\r\n    dragged: Ref<IDragContext>;\r\n    focused: Ref<string>;\r\n}\r\n\r\nfunction createState(): IState {\r\n    return {\r\n        nodes: null,\r\n        config: null,\r\n        dragged: ref(null),\r\n        focused: ref(null)\r\n    }\r\n}\r\n\r\nexport let state: IState = null;\r\n\r\nexport function createStore(props: ITreeProps): void {\r\n    const { nodes, config } = toRefs(props);\r\n\r\n    const computedNodes = computed(() => {\r\n        return nodes.value;\r\n    })\r\n\r\n    const computedConfig = computed(() => {\r\n        return config.value;\r\n    })\r\n\r\n    state = createState();\r\n    state.nodes = computedNodes;\r\n    state.config = computedConfig;\r\n    state.focused = ref(null);\r\n    state.dragged = ref({\r\n        node: null,\r\n        element: null,\r\n        wrapper: null,\r\n        parentId: null\r\n    });\r\n}\r\n","<template>\r\n  \r\n  <p>\r\n    <label for=\"showCheckBoxes\">Show checkboxes</label>\r\n    <input id=\"showCheckBoxes\" type=\"checkbox\" v-model=\"configuration.checkboxes\"/>\r\n\r\n    <label for=\"padding\">padding</label>\r\n    <input id=\"padding\" type=\"number\" v-model.number=\"configuration.padding\" />\r\n\r\n    <label for=\"editable\">editable</label>\r\n    <input id=\"editable\" type=\"checkbox\" v-model=\"configuration.editable\" />\r\n\r\n    <label for=\"disabled\">disabled</label>\r\n    <input id=\"disabled\" type=\"checkbox\" v-model=\"configuration.disabled\" />\r\n\r\n    <label for=\"keyboardNavigation\">keyboardNavigation</label>\r\n    <input id=\"keyboardNavigation\" type=\"checkbox\" v-model=\"configuration.keyboardNavigation\" />\r\n\r\n    <label for=\"DragandDrop\">DragandDrop</label>\r\n    <input id=\"DragandDrop\" type=\"checkbox\" v-model=\"configuration.dragAndDrop\" />\r\n\r\n    <label for=\"checkMode\">Checkmode auto</label>\r\n    <input id=\"checkMode\" type=\"checkbox\" :value=\"modeBool\" @input=\"changeMode\"/>\r\n  </p>\r\n\r\n  <Tree\r\n    ref=\"Tree\"\r\n    :nodes=\"nodes\"\r\n    :config=\"configuration\"\r\n    \r\n    @node-opened=\"log('node-opened')\"\r\n    @node-closed=\"log('node-closed')\"\r\n    @node-focus=\"log('node-focus')\"\r\n    @node-toggle=\"log('node-toggle')\"\r\n    @node-blur=\"log('node-blur')\"\r\n    @node-edit=\"log('node-edit')\"\r\n    \r\n    @node-checked=\"log('node-checked')\"\r\n    @node-unchecked=\"log('node-unchecked')\"\r\n    \r\n    @node-dragstart=\"log('node-dragstart')\"\r\n    @node-dragenter=\"log('node-dragenter')\"\r\n    @node-dragleave=\"log('node-dragleave')\"\r\n    @node-dragend=\"log('node-dragend')\"\r\n    @node-over=\"log('node-over')\"\r\n    @node-drop=\"log('node-drop')\"/>\r\n\r\n  <p>\r\n    <label for=\"nbRoots\">Number of Roots</label>\r\n    <input id=\"nbRoots\" type=\"number\" v-model.number=\"nbRoots\" />\r\n\r\n    <label for=\"maxChild\">Max child</label>\r\n    <input id=\"maxChild\" type=\"number\" v-model.number=\"maxChild\" />\r\n\r\n    <label for=\"maxDepth\">Max Depth</label>\r\n    <input id=\"maxDepth\" type=\"number\" v-model.number=\"maxDepth\" />\r\n\r\n    <button v-on:click.stop=\"randomTree\">Generate random tree</button>\r\n  </p>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport Tree from \"./components/Tree.vue\";\r\nimport { INode } from \"@/structure/INode\";\r\nimport { checkMode } from './structure/IConfiguration';\r\nimport { INodeState } from './structure/INodeState';\r\n\r\nexport default {\r\n  components: {\r\n    Tree,\r\n  },\r\n  data: function() {\r\n    return {\r\n      configuration: {\r\n        roots: [\"id1\", \"id2\", \"id3\"],\r\n        checkboxes: true,\r\n        dragAndDrop: false,\r\n        checkMode: checkMode.manual,\r\n        keyboardNavigation: false,        \r\n      },\r\n      nodes: {},\r\n      modeBool: false,\r\n      code: \"\",\r\n      nbRoots: 0,\r\n      maxDepth: 0,\r\n      maxChild: 0,\r\n      nbNodes: 0\r\n    }\r\n  },\r\n  mounted() {\r\n    this.nodes = {\r\n      id1: {\r\n        text: \"text1\",\r\n        children: [\"id11\", \"id12\", \"id13\"],\r\n        state: {\r\n          checked: true,\r\n          indeterminate: true,\r\n          draggable: true,\r\n          dropable: false\r\n        },\r\n      },\r\n      id11: {\r\n        text: \"text11\",\r\n        children: [\"id111\", \"id112\", \"id113\"],\r\n      },\r\n      id111: {\r\n        text: \"id111\",\r\n      },\r\n      id112: {\r\n        text: \"id112\",\r\n      },\r\n      id113: {\r\n        text: \"id113\",\r\n      },\r\n      id12: {\r\n        text: \"text12\",\r\n        children: [],\r\n      },\r\n      id13: {\r\n        text: \"text13\",\r\n        children: [\"id131\", \"id132\"],\r\n      },\r\n      id131: {\r\n        text: \"text131\"\r\n      },\r\n      id132: {\r\n        text: \"text132\"\r\n      },\r\n      id2: {\r\n        text: \"text2\",\r\n        children: [\"id21\", \"id22\"],\r\n      },\r\n      id21: {\r\n        text: \"text21\",\r\n        children: [\"id211\", \"id212\"],\r\n      },\r\n      id211: {\r\n        text: \"id211\",\r\n      },\r\n      id212: {\r\n        text: \"id212\",\r\n      },\r\n      id22: {\r\n        text: \"text12\",\r\n        children: [],\r\n      },\r\n      id3: {\r\n        text: \"text3\"\r\n      }\r\n    };\r\n    this.code = JSON.stringify(this.nodes, undefined, 4);\r\n  },\r\n  methods: {\r\n    log(s: string): void {\r\n      console.log(s);\r\n    },\r\n    changeMode(): void {\r\n      this.modeBool = !this.modeBool;\r\n      this.configuration.checkMode = this.modeBool ? checkMode.auto : checkMode.manual;\r\n    },\r\n    randomTree(): void {\r\n      this.configuration.roots = [];\r\n      this.nodes = {};\r\n      this.nbNodes = 0;\r\n\r\n      for (let i = 0; i < this.nbRoots; i++) {\r\n        let maxDepth = this.maxDepth;\r\n        const n = this.createNode(i + 1, maxDepth);\r\n        this.configuration.roots.push(n);\r\n      }\r\n\r\n      console.log(`node created: ${this.nbNodes}`);\r\n      console.log(this.nodes);      \r\n    },\r\n    addNodes(parent: INode, lvl: number, depth: number): void {\r\n      for (let i = 0; i < this.maxChild; i++) {\r\n        if (!this.randBool(0.8)) {\r\n          break;\r\n        }\r\n\r\n        const n = this.createNode(Number(`${lvl}${i + 1}`), depth);\r\n        parent.children.push(n);\r\n      }      \r\n    },\r\n    createNode(lvl: number, depth: number): string {\r\n      const id = `id${ lvl }`;\r\n      const n: INode = {\r\n        text: `text${id}`,\r\n        children: [],\r\n        state: this.randomState()\r\n      }\r\n\r\n      this.nodes[id] = n;\r\n      this.nbNodes++;\r\n\r\n      if (depth > 0 && this.randBool(0.8)) {\r\n        this.addNodes(n, lvl, depth - 1);\r\n      }\r\n\r\n      return id;      \r\n    },\r\n    randomState(): INodeState {\r\n      return {\r\n        opened: this.randBool(),\r\n        disabled: this.randBool(),\r\n        editable: this.randBool(),\r\n        focusable: this.randBool(),\r\n        draggable: this.randBool(),\r\n        dropable: this.randBool(),\r\n        checked: this.randBool(),\r\n        indeterminate: this.randBool(0.3)\r\n      };\r\n    },\r\n    randBool(mod: number = 0.5): boolean {\r\n      return Math.random() < mod;\r\n    }\r\n  }\r\n}\r\n</script> \r\n","<template>\r\n    <div class=\"tree\" :ref=\"setElementRef\" :style=\"style\">\r\n        <TreeLevel \r\n            :depth=\"0\"\r\n            :parentId=\"null\"\r\n            @node-blur=\"blur\"\r\n            v-bind=\"$attrs\">\r\n            \r\n            <template v-slot:before-input=\"props\">\r\n              <slot name=\"before-input\" :node=\"props.node\"></slot>\r\n            </template>\r\n\r\n            <template v-slot:after-input=\"props\">\r\n              <slot name=\"after-input\" :node=\"props.node\"></slot>\r\n            </template>\r\n        </TreeLevel>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport TreeLevel from './TreeLevel.vue';\r\nimport useTree from '../setup/useTree';\r\n\r\nexport default {\r\n  components: {\r\n    TreeLevel\r\n  },\r\n  props: {\r\n    nodes: {\r\n      required: true,\r\n      type: Object,\r\n      default: () => {}\r\n    },\r\n    config: {\r\n      required: true,\r\n      type: Object,\r\n      default: () => {}\r\n    }\r\n  },\r\n  setup(props) {\r\n    return {\r\n      ...useTree(props)\r\n    }\r\n  },\r\n  methods: {\r\n    setElementRef(e: any) {\r\n      this.element = e;\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style src=\"../css/material.css\"/>\r\n","import { ref, computed } from 'vue';\r\nimport { INode } from '../structure/INode';\r\nimport { createStore, state } from \"./store\";\r\n\r\nexport default function useTree(props: any): {} {\r\n    const element = ref<HTMLElement>(null);\r\n\r\n    createStore(props);\r\n\r\n    const style = computed(() => {\r\n        return {\r\n            \"display\": \"flex\",\r\n            \"align-items\": \"center\"\r\n        };\r\n    });\r\n\r\n    const blur = ((event: MouseEvent, node: INode) => {\r\n        const target = event.relatedTarget as HTMLElement;\r\n\r\n        if (!target || !element.value.contains(target)) {\r\n            state.focused.value = null;\r\n        }\r\n    });\r\n\r\n    return {\r\n        element,\r\n        style,\r\n        blur\r\n    }\r\n}","\r\nimport TreeLevel from './TreeLevel.vue';\r\nimport useTree from '../setup/useTree';\r\n\r\nexport default {\r\n  components: {\r\n    TreeLevel\r\n  },\r\n  props: {\r\n    nodes: {\r\n      required: true,\r\n      type: Object,\r\n      default: () => {}\r\n    },\r\n    config: {\r\n      required: true,\r\n      type: Object,\r\n      default: () => {}\r\n    }\r\n  },\r\n  setup(props) {\r\n    return {\r\n      ...useTree(props)\r\n    }\r\n  },\r\n  methods: {\r\n    setElementRef(e: any) {\r\n      this.element = e;\r\n    }\r\n  }\r\n}\r\n","import { render } from \"./Tree.vue?vue&type=template&id=c33d6e96\"\nimport script from \"./Tree.vue?vue&type=script&lang=ts\"\nexport * from \"./Tree.vue?vue&type=script&lang=ts\"\n\nimport \"../css/material.css?vue&type=style&index=0&lang=css\"\nscript.render = render\n\nexport default script","\r\nimport Tree from \"./components/Tree.vue\";\r\nimport { INode } from \"@/structure/INode\";\r\nimport { checkMode } from './structure/IConfiguration';\r\nimport { INodeState } from './structure/INodeState';\r\n\r\nexport default {\r\n  components: {\r\n    Tree,\r\n  },\r\n  data: function() {\r\n    return {\r\n      configuration: {\r\n        roots: [\"id1\", \"id2\", \"id3\"],\r\n        checkboxes: true,\r\n        dragAndDrop: false,\r\n        checkMode: checkMode.manual,\r\n        keyboardNavigation: false,        \r\n      },\r\n      nodes: {},\r\n      modeBool: false,\r\n      code: \"\",\r\n      nbRoots: 0,\r\n      maxDepth: 0,\r\n      maxChild: 0,\r\n      nbNodes: 0\r\n    }\r\n  },\r\n  mounted() {\r\n    this.nodes = {\r\n      id1: {\r\n        text: \"text1\",\r\n        children: [\"id11\", \"id12\", \"id13\"],\r\n        state: {\r\n          checked: true,\r\n          indeterminate: true,\r\n          draggable: true,\r\n          dropable: false\r\n        },\r\n      },\r\n      id11: {\r\n        text: \"text11\",\r\n        children: [\"id111\", \"id112\", \"id113\"],\r\n      },\r\n      id111: {\r\n        text: \"id111\",\r\n      },\r\n      id112: {\r\n        text: \"id112\",\r\n      },\r\n      id113: {\r\n        text: \"id113\",\r\n      },\r\n      id12: {\r\n        text: \"text12\",\r\n        children: [],\r\n      },\r\n      id13: {\r\n        text: \"text13\",\r\n        children: [\"id131\", \"id132\"],\r\n      },\r\n      id131: {\r\n        text: \"text131\"\r\n      },\r\n      id132: {\r\n        text: \"text132\"\r\n      },\r\n      id2: {\r\n        text: \"text2\",\r\n        children: [\"id21\", \"id22\"],\r\n      },\r\n      id21: {\r\n        text: \"text21\",\r\n        children: [\"id211\", \"id212\"],\r\n      },\r\n      id211: {\r\n        text: \"id211\",\r\n      },\r\n      id212: {\r\n        text: \"id212\",\r\n      },\r\n      id22: {\r\n        text: \"text12\",\r\n        children: [],\r\n      },\r\n      id3: {\r\n        text: \"text3\"\r\n      }\r\n    };\r\n    this.code = JSON.stringify(this.nodes, undefined, 4);\r\n  },\r\n  methods: {\r\n    log(s: string): void {\r\n      console.log(s);\r\n    },\r\n    changeMode(): void {\r\n      this.modeBool = !this.modeBool;\r\n      this.configuration.checkMode = this.modeBool ? checkMode.auto : checkMode.manual;\r\n    },\r\n    randomTree(): void {\r\n      this.configuration.roots = [];\r\n      this.nodes = {};\r\n      this.nbNodes = 0;\r\n\r\n      for (let i = 0; i < this.nbRoots; i++) {\r\n        let maxDepth = this.maxDepth;\r\n        const n = this.createNode(i + 1, maxDepth);\r\n        this.configuration.roots.push(n);\r\n      }\r\n\r\n      console.log(`node created: ${this.nbNodes}`);\r\n      console.log(this.nodes);      \r\n    },\r\n    addNodes(parent: INode, lvl: number, depth: number): void {\r\n      for (let i = 0; i < this.maxChild; i++) {\r\n        if (!this.randBool(0.8)) {\r\n          break;\r\n        }\r\n\r\n        const n = this.createNode(Number(`${lvl}${i + 1}`), depth);\r\n        parent.children.push(n);\r\n      }      \r\n    },\r\n    createNode(lvl: number, depth: number): string {\r\n      const id = `id${ lvl }`;\r\n      const n: INode = {\r\n        text: `text${id}`,\r\n        children: [],\r\n        state: this.randomState()\r\n      }\r\n\r\n      this.nodes[id] = n;\r\n      this.nbNodes++;\r\n\r\n      if (depth > 0 && this.randBool(0.8)) {\r\n        this.addNodes(n, lvl, depth - 1);\r\n      }\r\n\r\n      return id;      \r\n    },\r\n    randomState(): INodeState {\r\n      return {\r\n        opened: this.randBool(),\r\n        disabled: this.randBool(),\r\n        editable: this.randBool(),\r\n        focusable: this.randBool(),\r\n        draggable: this.randBool(),\r\n        dropable: this.randBool(),\r\n        checked: this.randBool(),\r\n        indeterminate: this.randBool(0.3)\r\n      };\r\n    },\r\n    randBool(mod: number = 0.5): boolean {\r\n      return Math.random() < mod;\r\n    }\r\n  }\r\n}\r\n","import { render } from \"./Test.vue?vue&type=template&id=ca863cf6\"\nimport script from \"./Test.vue?vue&type=script&lang=ts\"\nexport * from \"./Test.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { createApp } from 'vue'\r\nimport App from './Test.vue'\r\n\r\ncreateApp(App).mount('#app')\r\n"],"sourceRoot":""}